{% extends "base.html" %}

{% block content %}
<div class="d-flex" style="justify-content: space-between; align-items: center; margin-bottom: 30px;">
    <div>
        <h1 style="margin:0; font-weight: 700;">Dashboard</h1>
        <p style="color: #6b7280; margin: 5px 0 0 0;">Welcome back to your finances.</p>
    </div>
    <a href="{{ url_for('add') }}" class="btn btn-primary">+ Add Expense</a>
</div>

<div class="row">
    <div class="stat-card">
        <h6>Total Spent</h6>
        <h2>${{ "%.2f"|format(total) }}</h2>
    </div>
    <div class="stat-card" style="border-bottom-color: var(--success);">
        <h6>Transactions</h6>
        <h2>{{ expenses|length }}</h2>
    </div>
</div>

<div class="row" style="margin-top: 30px;">
    <div class="card" style="flex: 2;">
        <h3 style="margin-top:0">Recent Transactions</h3>
        <table class="table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Category</th>
                    <th>Amount</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for expense in expenses %}
                <tr>
                    <td>{{ expense['date'] }}</td>
                    <td><span class="badge badge-{{ expense['category'].lower() }}">{{ expense['category'] }}</span></td>
                    <td style="font-weight: 700;">${{ "%.2f"|format(expense['amount']) }}</td>
                    <td>
                        <a href="{{ url_for('edit', id=expense['id']) }}" style="text-decoration:none">‚úèÔ∏è</a>
                        <a href="javascript:void(0)" onclick="confirmDelete({{ expense['id'] }})" style="text-decoration:none; margin-left:10px">üóëÔ∏è</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="card" style="flex: 1;">
        <h3 style="margin-top:0">Distribution</h3>
        <canvas id="categoryChart" height="250"></canvas>
    </div>
</div>
{% endblock %}